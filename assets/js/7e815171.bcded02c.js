"use strict";(self.webpackChunkpathling_site=self.webpackChunkpathling_site||[]).push([[297],{3905:(t,e,n)=>{n.d(e,{Zo:()=>u,kt:()=>d});var a=n(7294);function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function o(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},l=Object.keys(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(a=0;a<l.length;a++)n=l[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var s=a.createContext({}),p=function(t){var e=a.useContext(s),n=e;return t&&(n="function"==typeof t?t(e):i(i({},e),t)),n},u=function(t){var e=p(t.components);return a.createElement(s.Provider,{value:e},t.children)},c={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,r=t.mdxType,l=t.originalType,s=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),m=p(n),d=r,h=m["".concat(s,".").concat(d)]||m[d]||c[d]||l;return n?a.createElement(h,i(i({ref:e},u),{},{components:n})):a.createElement(h,i({ref:e},u))}));function d(t,e){var n=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var l=n.length,i=new Array(l);i[0]=m;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o.mdxType="string"==typeof t?t:r,i[1]=o;for(var p=2;p<l;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2868:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const l={sidebar_position:1},i="Python",o={unversionedId:"libraries/python",id:"libraries/python",title:"Python",description:"A Python package named pathling is",source:"@site/docs/libraries/python.md",sourceDirName:"libraries",slug:"/libraries/python",permalink:"/docs/libraries/python",draft:!1,editUrl:"https://github.com/aehrc/pathling/tree/main/site/docs/libraries/python.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"libraries",next:{title:"Scala",permalink:"/docs/libraries/scala"}},s={},p=[{value:"Encoders",id:"encoders",level:2},{value:"Value set membership",id:"value-set-membership",level:2},{value:"Concept translation",id:"concept-translation",level:2},{value:"Subsumption testing",id:"subsumption-testing",level:2}],u={toc:p};function c(t){let{components:e,...n}=t;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"python"},"Python"),(0,r.kt)("p",null,"A Python package named ",(0,r.kt)("a",{parentName:"p",href:"https://pypi.org/project/pathling/"},"pathling")," is\navailable from PyPI."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"pathname:///docs/python/"},"View the generated API documentation ","\u2192")),(0,r.kt)("h2",{id:"encoders"},"Encoders"),(0,r.kt)("p",null,"The Python library features a set of encoders for converting FHIR data into\nSpark dataframes."),(0,r.kt)("p",null,"See the ",(0,r.kt)("a",{parentName:"p",href:"/docs/encoders"},"Encoders")," page for more details."),(0,r.kt)("h2",{id:"value-set-membership"},"Value set membership"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"member_of")," function can be used to test the membership of a code within a\nFHIR value set. In this example, we take a list of SNOMED CT diagnosis codes and\ncreate a new column which shows which are viral infections."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"result = pc.member_of(csv, to_coding(csv.CODE, 'http://snomed.info/sct'),\n                      to_ecl_value_set(\"\"\"\n<< 64572001|Disease| : (\n  << 370135005|Pathological process| = << 441862004|Infectious process|,\n  << 246075003|Causative agent| = << 49872002|Virus|\n)\n                      \"\"\"), 'VIRAL_INFECTION')\nresult.select('CODE', 'DESCRIPTION', 'VIRAL_INFECTION').show()\n")),(0,r.kt)("p",null,"Results in:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"CODE"),(0,r.kt)("th",{parentName:"tr",align:null},"DESCRIPTION"),(0,r.kt)("th",{parentName:"tr",align:null},"VIRAL_INFECTION"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"65363002"),(0,r.kt)("td",{parentName:"tr",align:null},"Otitis media"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"16114001"),(0,r.kt)("td",{parentName:"tr",align:null},"Fracture of ankle"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"444814009"),(0,r.kt)("td",{parentName:"tr",align:null},"Viral sinusitis"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"444814009"),(0,r.kt)("td",{parentName:"tr",align:null},"Viral sinusitis"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"43878008"),(0,r.kt)("td",{parentName:"tr",align:null},"Streptococcal sore throat"),(0,r.kt)("td",{parentName:"tr",align:null},"false")))),(0,r.kt)("h2",{id:"concept-translation"},"Concept translation"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"translate")," function can be used to translate codes from one code system to\nanother using maps that are known to the terminology server. In this example, we\ntranslate our SNOMED CT diagnosis codes into Read CTV3."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"result = pc.translate(csv, to_coding(csv.CODE, 'http://snomed.info/sct'),\n                      'http://snomed.info/sct/900000000000207008?fhir_cm='\n                      '900000000000497000',\n                      output_column_name='READ_CODE')\nresult = result.withColumn('READ_CODE', result.READ_CODE.code)\nresult.select('CODE', 'DESCRIPTION', 'READ_CODE').show()\n")),(0,r.kt)("p",null,"Results in:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"CODE"),(0,r.kt)("th",{parentName:"tr",align:null},"DESCRIPTION"),(0,r.kt)("th",{parentName:"tr",align:null},"READ_CODE"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"65363002"),(0,r.kt)("td",{parentName:"tr",align:null},"Otitis media"),(0,r.kt)("td",{parentName:"tr",align:null},"X00ik")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"16114001"),(0,r.kt)("td",{parentName:"tr",align:null},"Fracture of ankle"),(0,r.kt)("td",{parentName:"tr",align:null},"S34..")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"444814009"),(0,r.kt)("td",{parentName:"tr",align:null},"Viral sinusitis"),(0,r.kt)("td",{parentName:"tr",align:null},"XUjp0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"444814009"),(0,r.kt)("td",{parentName:"tr",align:null},"Viral sinusitis"),(0,r.kt)("td",{parentName:"tr",align:null},"XUjp0")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"43878008"),(0,r.kt)("td",{parentName:"tr",align:null},"Streptococcal sore throat"),(0,r.kt)("td",{parentName:"tr",align:null},"A340.")))),(0,r.kt)("h2",{id:"subsumption-testing"},"Subsumption testing"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"subsumes"),' function allows us to perform subsumption testing on codes within\nour data. In hierarchical code systems, a subsumption test determines whether a\ncode is a subtype of another code, e.g. an "ankle fracture" is subsumed by "\nfracture".'),(0,r.kt)("p",null,'In this example, we first take our codes, cross-join them and then test whether\nthey subsume each other. Then we do another subsumption test against the "ear,\nnose and throat disorder" concept.'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# 232208008 |Ear, nose and throat disorder|\nleft_coding = Coding('http://snomed.info/sct', '232208008')\nright_coding_column = to_coding(csv.CODE, 'http://snomed.info/sct')\n\nresult = pc.subsumes(csv, 'SUBSUMES',\n                     left_coding=left_coding,\n                     right_coding_column=right_coding_column)\n\nresult.select('CODE', 'DESCRIPTION', 'IS_ENT').show()\n")),(0,r.kt)("p",null,"Results in:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"CODE"),(0,r.kt)("th",{parentName:"tr",align:null},"DESCRIPTION"),(0,r.kt)("th",{parentName:"tr",align:null},"IS_ENT"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"65363002"),(0,r.kt)("td",{parentName:"tr",align:null},"Otitis media"),(0,r.kt)("td",{parentName:"tr",align:null},"true")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"16114001"),(0,r.kt)("td",{parentName:"tr",align:null},"Fracture of ankle"),(0,r.kt)("td",{parentName:"tr",align:null},"false")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"444814009"),(0,r.kt)("td",{parentName:"tr",align:null},"Viral sinusitis"),(0,r.kt)("td",{parentName:"tr",align:null},"true")))))}c.isMDXComponent=!0}}]);