"use strict";(self.webpackChunkpathling_site=self.webpackChunkpathling_site||[]).push([[837],{3905:function(e,t,r){r.d(t,{Zo:function(){return c},kt:function(){return d}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),l=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},c=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=l(r),d=o,h=m["".concat(p,".").concat(d)]||m[d]||u[d]||a;return r?n.createElement(h,i(i({ref:t},c),{},{components:r})):n.createElement(h,i({ref:t},c))}));function d(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},9765:function(e,t,r){r.r(t),r.d(t,{assets:function(){return c},contentTitle:function(){return p},default:function(){return d},frontMatter:function(){return s},metadata:function(){return l},toc:function(){return u}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),i=["components"],s={sidebar_position:1},p="Import",l={unversionedId:"server/operations/import",id:"server/operations/import",title:"Import",description:"FHIR OperationDefinition",source:"@site/docs/server/operations/import.md",sourceDirName:"server/operations",slug:"/server/operations/import",permalink:"/docs/server/operations/import",draft:!1,editUrl:"https://github.com/aehrc/pathling/tree/main/site/docs/server/operations/import.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"server",previous:{title:"Getting started",permalink:"/docs/server/getting-started"},next:{title:"Search",permalink:"/docs/server/operations/search"}},c={},u=[{value:"Request",id:"request",level:2},{value:"Response",id:"response",level:2},{value:"Examples",id:"examples",level:2}],m={toc:u};function d(e){var t=e.components,s=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},m,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"import"},"Import"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://pathling.csiro.au/fhir/OperationDefinition/import-5"},"FHIR OperationDefinition")),(0,a.kt)("p",null,"This operation allows FHIR R4 data to be imported into the server, making it\navailable for query via other operations such as ",(0,a.kt)("a",{parentName:"p",href:"./search"},"search"),",\n",(0,a.kt)("a",{parentName:"p",href:"./aggregate"},"aggregate")," and ",(0,a.kt)("a",{parentName:"p",href:"./extract"},"extract"),". This operation\naccepts the\n",(0,a.kt)("a",{parentName:"p",href:"http://ndjson.org/"},"NDJSON")," format, and links to retrieve that data are\nprovided rather that sending the data inline within the request itself. This is\nto allow for large data sets to be imported efficiently."),(0,a.kt)("p",null,"Currently Pathling supports retrieval of NDJSON files from\n",(0,a.kt)("a",{parentName:"p",href:"https://aws.amazon.com/s3/"},"Amazon S3")," (",(0,a.kt)("inlineCode",{parentName:"p"},"s3://"),"),\n",(0,a.kt)("a",{parentName:"p",href:"https://hadoop.apache.org/docs/r1.2.1/hdfs_design.html"},"HDFS")," (",(0,a.kt)("inlineCode",{parentName:"p"},"hdfs://"),") and\nfilesystem (",(0,a.kt)("inlineCode",{parentName:"p"},"file://"),") URLs. Authentication is supported for S3, see\n",(0,a.kt)("a",{parentName:"p",href:"../configuration"},"Configuration")," for details."),(0,a.kt)("p",null,"Import sources must be explicitly whitelisted within the configuration, for\nsecurity reasons. See the ",(0,a.kt)("a",{parentName:"p",href:"../configuration#import"},"Import")," section of the\nconfiguration documentation for details."),(0,a.kt)("p",null,"There are a number of configuration values that affect the encoding of resources\nimported by this operation, see the ",(0,a.kt)("a",{parentName:"p",href:"../configuration#encoding"},"Encoding"),"\nsection of the configuration documentation for details."),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"The ",(0,a.kt)("inlineCode",{parentName:"p"},"import")," operation supports the ",(0,a.kt)("a",{parentName:"p",href:"../async"},"Asynchronous Request Pattern"),",\nwhich allows you to kick off a long-running request and check on its progress\nusing a status endpoint."))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"POST [FHIR endpoint]/$import\n")),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Import",src:r(7157).Z+"#light-mode-only",title:"Import",width:"668",height:"447"}),"\n",(0,a.kt)("img",{alt:"Import",src:r(3719).Z+"#dark-mode-only",title:"Import",width:"668",height:"447"})),(0,a.kt)("h2",{id:"request"},"Request"),(0,a.kt)("p",null,"The request for the ",(0,a.kt)("inlineCode",{parentName:"p"},"$import")," operation is a\n",(0,a.kt)("a",{parentName:"p",href:"https://hl7.org/fhir/R4/parameters.html"},"Parameters")," resource containing the\nfollowing parameters:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"source [1..*]")," - A source FHIR NDJSON file containing resources to be\nincluded within this import operation. Each file must contain only one type of\nresource.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"resourceType [1..1] (code)")," - The base FHIR resource type contained\nwithin this source file. Code must be a member of\n",(0,a.kt)("a",{parentName:"li",href:"http://hl7.org/fhir/ValueSet/resource-types"},"http://hl7.org/fhir/ValueSet/resource-types"),"\n."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"url [1..1] (uri)")," - A URL that can be used to retrieve this source file."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"mode [0..1] (code)")," - A value of ",(0,a.kt)("inlineCode",{parentName:"li"},"overwrite")," will cause all existing\nresources of the specified type to be deleted and replaced with the\ncontents of the source file. A value of ",(0,a.kt)("inlineCode",{parentName:"li"},"merge")," will match existing\nresources with updated resources in the source file based on their ID, and\neither update the existing resources or add new resources as appropriate.\nThe default value is ",(0,a.kt)("inlineCode",{parentName:"li"},"overwrite"),".")))),(0,a.kt)("h2",{id:"response"},"Response"),(0,a.kt)("p",null,"The response from the ",(0,a.kt)("inlineCode",{parentName:"p"},"$import")," operation is an\n",(0,a.kt)("a",{parentName:"p",href:"https://hl7.org/fhir/R4/operationoutcome.html"},"OperationOutcome")," resource,\nwhich will indicate success or a description of any errors that occurred."),(0,a.kt)("h2",{id:"examples"},"Examples"),(0,a.kt)("p",null,"Check out example ",(0,a.kt)("inlineCode",{parentName:"p"},"import")," requests in the Postman collection:"),(0,a.kt)("a",{class:"postman-link",href:"https://documenter.getpostman.com/view/634774/UVsQs48s#72ee4a60-e701-4d1a-af58-85a762301b6c"},(0,a.kt)("img",{src:"https://run.pstmn.io/button.svg",alt:"Run in Postman"})))}d.isMDXComponent=!0},3719:function(e,t,r){t.Z=r.p+"assets/images/import-dark-fc824566b6b45ba3152dd4084684481c.svg"},7157:function(e,t,r){t.Z=r.p+"assets/images/import-b413909a7c9d410427a1f95ce0868c48.svg"}}]);